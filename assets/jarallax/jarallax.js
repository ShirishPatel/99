/*!
 * Name    : Just Another Parallax [Jarallax]
 * Version : 1.1.0
 * Author  : _nK http://nkdev.info
 * GitHub  : https://github.com/nk-o/jarallax
 */
(function(n){"use strict";typeof define=="function"&&define.amd?define(["jquery"],n):typeof exports!="undefined"?module.exports=n(require("jquery")):n(jQuery)})(function(n){var u;Date.now||(Date.now=function(){return(new Date).getTime()});window.requestAnimationFrame||function(){"use strict";for(var n,t,r=["webkit","moz"],i=0;i<r.length&&!window.requestAnimationFrame;++i)n=r[i],window.requestAnimationFrame=window[n+"RequestAnimationFrame"],window.cancelAnimationFrame=window[n+"CancelAnimationFrame"]||window[n+"CancelRequestAnimationFrame"];!/iP(ad|hone|od).*OS 6/.test(window.navigator.userAgent)&&window.requestAnimationFrame&&window.cancelAnimationFrame||(t=0,window.requestAnimationFrame=function(n){var i=Date.now(),r=Math.max(t+16,i);return setTimeout(function(){n(t=r)},r-i)},window.cancelAnimationFrame=clearTimeout)}();var r=function(){for(var t="transform WebkitTransform MozTransform OTransform msTransform".split(" "),i=document.createElement("div"),n=0;n<t.length;n++)if(i&&i.style[t[n]]!==undefined)return t[n];return!1}(),f=function(){var n,t,r,i;if(!window.getComputedStyle)return!1;n=document.createElement("p");r={webkitTransform:"-webkit-transform",OTransform:"-o-transform",msTransform:"-ms-transform",MozTransform:"-moz-transform",transform:"transform"};(document.body||document.documentElement).insertBefore(n,null);for(i in r)n.style[i]!==undefined&&(n.style[i]="translate3d(1px,1px,1px)",t=window.getComputedStyle(n).getPropertyValue(r[i]));return(document.body||document.documentElement).removeChild(n),t!==undefined&&t.length>0&&t!=="none"}(),e=navigator.userAgent.toLowerCase().indexOf("android")>-1,o=!!window.opera,i=[],t=function(){function t(t,u){var f=this,s;f.$item=n(t);f.defaults={speed:.5,imgSrc:null,imgWidth:null,imgHeight:null,enableTransform:!0,zIndex:-100};s=f.$item.data("jarallax")||{};f.options=n.extend({},f.defaults,s,u);f.options.speed=Math.min(1,Math.max(0,parseFloat(f.options.speed)));f.instanceID=r++;f.image={src:f.options.imgSrc||null,$container:null,$item:null,width:f.options.imgWidth||null,height:f.options.imgHeight||null,useImgTag:e||o};f.initImg()&&(f.init(),i.push(f))}var r=0;return t}();t.prototype.initImg=function(){var n=this;return(n.image.src===null&&(n.image.src=n.$item.css("background-image").replace(/^url\(['"]?/g,"").replace(/['"]?\)$/g,"")),!n.image.src||n.image.src==="none")?!1:!0};t.prototype.init=function(){function f(){t.coverImage();t.clipContainer();t.onScroll(!0);t.$item.data("jarallax-original-styles",t.$item.attr("style"));setTimeout(function(){t.$item.css({"background-image":"none","background-attachment":"scroll","background-size":"auto"})},0)}var t=this,u={position:"absolute",top:0,left:0,width:"100%",height:"100%",overflow:"hidden","pointer-events":"none",transition:"transform linear -1ms, -webkit-transform linear -1ms"},i={position:"fixed"};t.image.$container=n("<div>").css(u).css({visibility:"hidden","z-index":t.options.zIndex}).attr("id","jarallax-container-"+t.instanceID).prependTo(t.$item);t.image.useImgTag&&r?(t.image.$item=n("<img>").attr("src",t.image.src),i=n.extend({"max-width":"none"},u,i)):(t.image.$item=n("<div>"),i=n.extend({"background-position":"50% 50%","background-repeat":"no-repeat no-repeat","background-image":'url("'+t.image.src+'")'},u,i));t.image.$item.css(i).prependTo(t.image.$container);t.image.width&&t.image.height?f():t.getImageSize(t.image.src,function(n,i){t.image.width=n;t.image.height=i;f()})};t.prototype.destroy=function(){for(var t=this,r=0,u=i.length;r<u;r++)if(i[r].instanceID===t.instanceID){i.splice(r,1);break}n("head #jarallax-clip-"+t.instanceID).remove();t.$item.attr("style",t.$item.data("jarallax-original-styles"));t.$item.removeData("jarallax-original-styles");t.image.$container.remove();delete t.$item[0].jarallax};t.prototype.round=function(n){return Math.floor(n*100)/100};t.prototype.getImageSize=function(n,t){if(!n||!t)return!1;var i=new Image;i.onload=function(){t(i.width,i.height)};i.src=n};t.prototype.clipContainer=function(){var t=this,u=t.image.$container.outerWidth(!0),f=t.image.$container.outerHeight(!0),i=n("head #jarallax-clip-"+t.instanceID),r;i.length||(n("head").append('<style type="text/css" id="jarallax-clip-'+t.instanceID+'"><\/style>'),i=n("head #jarallax-clip-"+t.instanceID));r=["#jarallax-container-"+t.instanceID+" {","   clip: rect(0px "+u+"px "+f+"px 0);","   clip: rect(0px, "+u+"px, "+f+"px, 0);","}"].join("\n");i[0].styleSheet?i[0].styleSheet.cssText=r:i.html(r)};t.prototype.coverImage=function(){var t=this;if(t.image.width&&t.image.height){var s=t.image.$container.outerWidth(!0),h=t.image.$container.outerHeight(!0),c=n(window).outerWidth(!0),l=n(window).outerHeight(!0),e=t.image.width,o=t.image.height,u,f,i={width:Math.max(c,s)*Math.max(t.options.speed,1),height:Math.max(l,h)*Math.max(t.options.speed,1)};i.width/i.height>e/o?(u=i.width,f=i.width*o/e):(u=i.height*e/o,f=i.height);t.image.useImgTag&&r?(i.width=t.round(u),i.height=t.round(f),i.marginLeft=t.round(-(u-s)/2),i.marginTop=t.round(-(f-h)/2)):i.backgroundSize=t.round(u)+"px "+t.round(f)+"px";t.image.$item.css(i)}};t.prototype.onScroll=function(t){var i=this,u,e;if(i.image.width&&i.image.height){var s=n(window).scrollTop(),c=n(window).scrollLeft(),p=n(window).width(),l=n(window).height(),h=i.$item.offset().top,a=i.$item.offset().left,v=i.$item.outerHeight(!0),o={visibility:"visible",backgroundPosition:"50% 50%"},y=t?!1:h+v<s||h>s+l;y||(u=-(s-h)*i.options.speed,e=-(c-a)*i.options.speed,u=i.round(u),e=i.round(e),r&&i.options.enableTransform?(o.transform="translateY("+u+"px) translateX("+e+"px)",f&&(o.transform="translate3d("+e+"px, "+u+"px, 0)")):o.backgroundPosition=e+"px "+u+"px",i.image.$item.css(o))}},function(){n(window).on("scroll.jarallax",function(){window.requestAnimationFrame(function(){for(var n=0,t=i.length;n<t;n++)i[n].onScroll()})});var t;n(window).on("resize.jarallax orientationchange.jarallax load.jarallax",function(){clearTimeout(t);t=setTimeout(function(){window.requestAnimationFrame(function(){for(var n,t=0,r=i.length;t<r;t++)n=i[t],n.coverImage(),n.clipContainer(),n.onScroll()})},100)})}();u=n.fn.jarallax;n.fn.jarallax=function(){var i=this,r=arguments[0],f=Array.prototype.slice.call(arguments,1),e=i.length,n=0,u;for(n;n<e;n++)if(typeof r=="object"||typeof r=="undefined"?i[n].jarallax||(i[n].jarallax=new t(i[n],r)):u=i[n].jarallax?i[n].jarallax[r].apply(i[n].jarallax,f):undefined,typeof u!="undefined")return u;return this};n.fn.jarallax.noConflict=function(){return n.fn.jarallax=u,this};n(document).on("ready.data-jarallax",function(){n("[data-jarallax]").jarallax()})})