!function (t) { "use strict"; "function" == typeof define && define.amd ? define(["jquery"], t) : "object" == typeof module && module.exports ? module.exports = t(require("jquery")) : t(window.jQuery) }(function (t) { "use strict"; var e, a, n, i, r, l, s, o; t.fn.ratingLocales = {}, e = ".rating", a = function (e, a) { return null === e || void 0 === e || 0 === e.length || a && "" === t.trim(e) }, n = function (t, e) { return t ? " " + e : "" }, i = function (t, e) { t.removeClass(e).addClass(e) }, r = function (t) { var e = ("" + t).match(/(?:\.(\d+))?(?:[eE]([+-]?\d+))?$/); return e ? Math.max(0, (e[1] ? e[1].length : 0) - (e[2] ? +e[2] : 0)) : 0 }, l = function (t, e) { return parseFloat(t.toFixed(e)) }, s = function (t, a, n, i) { var r = i ? a : a.split(" ").join(e + " ") + e; t.off(r).on(r, n) }, (o = function (e, a) { this.$element = t(e), this._init(a) }).prototype = { constructor: o, _parseAttr: function (t, e) { var n, i, r, l, s = this.$element, o = s.attr("type"); if ("range" === o || "number" === o) { switch (i = e[t] || s.data(t) || s.attr(t), t) { case "min": r = 0; break; case "max": r = 5; break; default: r = .5 } n = a(i) ? r : i, l = parseFloat(n) } else l = parseFloat(e[t]); return isNaN(l) ? r : l }, _setDefault: function (t, e) { a(this[t]) && (this[t] = e) }, _listenClick: function (t, e) { return t.stopPropagation(), t.preventDefault(), !0 !== t.handled && (e(t), void (t.handled = !0)) }, _starClick: function (t) { var e, a = this; a._listenClick(t, function (t) { return !a.inactive && (e = a._getTouchPosition(t), a._setStars(e), a.$element.trigger("change").trigger("rating.change", [a.$element.val(), a._getCaption()]), void (a.starClicked = !0)) }) }, _starMouseMove: function (t) { var e, a, n = this; !n.hoverEnabled || n.inactive || t && t.isDefaultPrevented() || (n.starClicked = !1, e = n._getTouchPosition(t), a = n.calculate(e), n._toggleHover(a), n.$element.trigger("rating.hover", [a.val, a.caption, "stars"])) }, _starMouseLeave: function (t) { var e, a = this; !a.hoverEnabled || a.inactive || a.starClicked || t && t.isDefaultPrevented() || (e = a.cache, a._toggleHover(e), a.$element.trigger("rating.hoverleave", ["stars"])) }, _clearClick: function (t) { var e = this; e._listenClick(t, function () { e.inactive || (e.clear(), e.clearClicked = !0) }) }, _clearMouseMove: function (t) { var e, a, n, i = this; !i.hoverEnabled || i.inactive || !i.hoverOnClear || t && t.isDefaultPrevented() || (i.clearClicked = !1, e = '<span class="' + i.clearCaptionClass + '">' + i.clearCaption + "</span>", a = i.clearValue, n = { caption: e, width: i.getWidthFromValue(a) || 0, val: a }, i._toggleHover(n), i.$element.trigger("rating.hover", [a, e, "clear"])) }, _clearMouseLeave: function (t) { var e, a = this; !a.hoverEnabled || a.inactive || a.clearClicked || !a.hoverOnClear || t && t.isDefaultPrevented() || (e = a.cache, a._toggleHover(e), a.$element.trigger("rating.hoverleave", ["clear"])) }, _resetForm: function (t) { t && t.isDefaultPrevented() || this.inactive || this.reset() }, _setTouch: function (t, e) { var n, i, r, l, s, o, c, u = this; ("ontouchstart" in window || window.DocumentTouch && document instanceof window.DocumentTouch) && !u.inactive && (n = t.originalEvent, i = a(n.touches) ? n.changedTouches : n.touches, r = u._getTouchPosition(i[0]), e ? (u._setStars(r), u.$element.trigger("change").trigger("rating.change", [u.$element.val(), u._getCaption()]), u.starClicked = !0) : (s = (l = u.calculate(r)).val <= u.clearValue ? u.fetchCaption(u.clearValue) : l.caption, o = u.getWidthFromValue(u.clearValue), c = l.val <= u.clearValue ? o + "%" : l.width, u._setCaption(s), u.$filledStars.css("width", c))) }, _initTouch: function (t) { var e = "touchend" === t.type; this._setTouch(t, e) }, _initSlider: function (t) { var e = this; a(e.$element.val()) && e.$element.val(0), e.initialValue = e.$element.val(), e._setDefault("min", e._parseAttr("min", t)), e._setDefault("max", e._parseAttr("max", t)), e._setDefault("step", e._parseAttr("step", t)), (isNaN(e.min) || a(e.min)) && (e.min = 0), (isNaN(e.max) || a(e.max)) && (e.max = 5), (isNaN(e.step) || a(e.step) || 0 === e.step) && (e.step = .5), e.diff = e.max - e.min }, _initHighlight: function (t) { var e, a = this, n = a._getCaption(); t || (t = a.$element.val()), e = a.getWidthFromValue(t) + "%", a.$filledStars.width(e), a.cache = { caption: n, width: e, val: t } }, _getContainerCss: function () { var t = this; return "rating-container" + n(t.theme, "theme-" + t.theme) + n(t.rtl, "rating-rtl") + n(t.size, "rating-" + t.size) + n(t.animate, "rating-animate") + n(t.disabled || t.readonly, "rating-disabled") + n(t.containerClass, t.containerClass) }, _checkDisabled: function () { var t = this, e = t.$element, a = t.options; t.disabled = void 0 === a.disabled ? e.attr("disabled") || !1 : a.disabled, t.readonly = void 0 === a.readonly ? e.attr("readonly") || !1 : a.readonly, t.inactive = t.disabled || t.readonly, e.attr({ disabled: t.disabled, readonly: t.readonly }) }, _addContent: function (t, e) { var a = this.$container, n = "clear" === t; return this.rtl ? n ? a.append(e) : a.prepend(e) : n ? a.prepend(e) : a.append(e) }, _generateRating: function () { var e, a, n, r = this, l = r.$element; a = r.$container = t(document.createElement("div")).insertBefore(l), i(a, r._getContainerCss()), r.$rating = e = t(document.createElement("div")).attr("class", "rating").appendTo(a).append(r._getStars("empty")).append(r._getStars("filled")), r.$emptyStars = e.find(".empty-stars"), r.$filledStars = e.find(".filled-stars"), r._renderCaption(), r._renderClear(), r._initHighlight(), a.append(l), r.rtl && (n = Math.max(r.$emptyStars.outerWidth(), r.$filledStars.outerWidth()), r.$emptyStars.width(n)) }, _getCaption: function () { return this.$caption && this.$caption.length ? this.$caption.html() : this.defaultCaption }, _setCaption: function (t) { this.$caption && this.$caption.length && this.$caption.html(t) }, _renderCaption: function () { var e, a = this, n = a.$element.val(), r = a.captionElement ? t(a.captionElement) : ""; if (a.showCaption) { if (e = a.fetchCaption(n), r && r.length) return i(r, "caption"), r.html(e), void (a.$caption = r); a._addContent("caption", '<div class="caption">' + e + "</div>"), a.$caption = a.$container.find(".caption") } }, _renderClear: function () { var e, a = this, n = a.clearElement ? t(a.clearElement) : ""; if (a.showClear) { if (e = a._getClearClass(), n.length) return i(n, e), n.attr({ title: a.clearButtonTitle }).html(a.clearButton), void (a.$clear = n); a._addContent("clear", '<div class="' + e + '" title="' + a.clearButtonTitle + '">' + a.clearButton + "</div>"), a.$clear = a.$container.find("." + a.clearButtonBaseClass) } }, _getClearClass: function () { return this.clearButtonBaseClass + " " + (this.inactive ? "" : this.clearButtonActiveClass) }, _getTouchPosition: function (t) { return (a(t.pageX) ? t.originalEvent.touches[0].pageX : t.pageX) - this.$rating.offset().left }, _toggleHover: function (t) { var e, a, n, i = this; t && (i.hoverChangeStars && (e = i.getWidthFromValue(i.clearValue), a = t.val <= i.clearValue ? e + "%" : t.width, i.$filledStars.css("width", a)), i.hoverChangeCaption && ((n = t.val <= i.clearValue ? i.fetchCaption(i.clearValue) : t.caption) && i._setCaption(n + ""))) }, _init: function (e) { var a = this, n = a.$element.addClass("hide"); return a.options = e, t.each(e, function (t, e) { a[t] = e }), (a.rtl || "rtl" === n.attr("dir")) && (a.rtl = !0, n.attr("dir", "rtl")), a.starClicked = !1, a.clearClicked = !1, a._initSlider(e), a._checkDisabled(), a.displayOnly && (a.inactive = !0, a.showClear = !1, a.showCaption = !1), a._generateRating(), a._listen(), n.removeClass("rating-loading") }, _listen: function () { var e = this, a = e.$element, n = a.closest("form"), i = e.$rating, r = e.$clear; return s(i, "touchstart touchmove touchend", t.proxy(e._initTouch, e)), s(i, "click touchstart", t.proxy(e._starClick, e)), s(i, "mousemove", t.proxy(e._starMouseMove, e)), s(i, "mouseleave", t.proxy(e._starMouseLeave, e)), e.showClear && r.length && (s(r, "click touchstart", t.proxy(e._clearClick, e)), s(r, "mousemove", t.proxy(e._clearMouseMove, e)), s(r, "mouseleave", t.proxy(e._clearMouseLeave, e))), n.length && s(n, "reset", t.proxy(e._resetForm, e)), a }, _getStars: function (t) { var e, a = '<span class="' + t + '-stars">'; for (e = 1; e <= this.stars; e++) a += '<span class="star">' + this[t + "Star"] + "</span>"; return a + "</span>" }, _setStars: function (t) { var e = this, a = arguments.length ? e.calculate(t) : e.calculate(), n = e.$element; return n.val(a.val), e.$filledStars.css("width", a.width), e._setCaption(a.caption), e.cache = a, n }, showStars: function (t) { var e = parseFloat(t); return this.$element.val(isNaN(e) ? this.clearValue : e), this._setStars() }, calculate: function (t) { var e = this, n = a(e.$element.val()) ? 0 : e.$element.val(), i = arguments.length ? e.getValueFromPosition(t) : n, r = e.fetchCaption(i), l = e.getWidthFromValue(i); return { caption: r, width: l += "%", val: i } }, getValueFromPosition: function (t) { var e, a, n = this, i = r(n.step), s = n.$rating.width(); return a = n.diff * t / (s * n.step), a = n.rtl ? Math.floor(a) : Math.ceil(a), e = l(parseFloat(n.min + a * n.step), i), e = Math.max(Math.min(e, n.max), n.min), n.rtl ? n.max - e : e }, getWidthFromValue: function (t) { var e, a, n = this.min, i = this.max, r = this.$emptyStars; return !t || n >= t || n === i ? 0 : (e = (a = r.outerWidth()) ? r.width() / a : 1, t >= i ? 100 : (t - n) * e * 100 / (i - n)) }, fetchCaption: function (t) { var e, n, i, s = this, o = parseFloat(t) || s.clearValue, c = s.starCaptions, u = s.starCaptionClasses; return o && o !== s.clearValue && (o = l(o, r(s.step))), i = "function" == typeof u ? u(o) : u[o], n = "function" == typeof c ? c(o) : c[o], e = a(n) ? s.defaultCaption.replace(/\{rating}/g, o) : n, '<span class="' + (a(i) ? s.clearCaptionClass : i) + '">' + (o === s.clearValue ? s.clearCaption : e) + "</span>" }, destroy: function () { var e = this.$element; return a(this.$container) || this.$container.before(e).remove(), t.removeData(e.get(0)), e.off("rating").removeClass("hide") }, create: function (t) { var e = t || this.options || {}; return this.destroy().rating(e) }, clear: function () { var t = this, e = '<span class="' + t.clearCaptionClass + '">' + t.clearCaption + "</span>"; return t.inactive || t._setCaption(e), t.showStars(t.clearValue).trigger("change").trigger("rating.clear") }, reset: function () { return this.showStars(this.initialValue).trigger("rating.reset") }, update: function (t) { return arguments.length ? this.showStars(t) : this.$element }, refresh: function (e) { var a = this.$element; return e ? this.destroy().rating(t.extend(!0, this.options, e)).trigger("rating.refresh") : a } }, t.fn.rating = function (e) { var n = Array.apply(null, arguments), i = []; switch (n.shift(), this.each(function () { var r, l = t(this), s = l.data("rating"), c = "object" == typeof e && e, u = c.language || l.data("language") || "en", h = {}; s || ("en" === u || a(t.fn.ratingLocales[u]) || (h = t.fn.ratingLocales[u]), r = t.extend(!0, {}, t.fn.rating.defaults, t.fn.ratingLocales.en, h, c, l.data()), s = new o(this, r), l.data("rating", s)), "string" == typeof e && i.push(s[e].apply(s, n)) }), i.length) { case 0: return this; case 1: return void 0 === i[0] ? this : i[0]; default: return i } }, t.fn.rating.defaults = { theme: "", language: "en", stars: 5, filledStar: '<i class="glyphicon glyphicon-star"></i>', emptyStar: '<i class="glyphicon glyphicon-star-empty"></i>', containerClass: "", size: "md", animate: !0, displayOnly: !1, rtl: !1, showClear: !0, showCaption: !0, starCaptionClasses: { .5: "label label-danger", 1: "label label-danger", 1.5: "label label-warning", 2: "label label-warning", 2.5: "label label-info", 3: "label label-info", 3.5: "label label-primary", 4: "label label-primary", 4.5: "label label-success", 5: "label label-success" }, clearButton: '<i class="glyphicon glyphicon-minus-sign"></i>', clearButtonBaseClass: "clear-rating", clearButtonActiveClass: "clear-rating-active", clearCaptionClass: "label label-default", clearValue: null, captionElement: null, clearElement: null, hoverEnabled: !0, hoverChangeCaption: !0, hoverChangeStars: !0, hoverOnClear: !0 }, t.fn.ratingLocales.en = { defaultCaption: "{rating} Stars", starCaptions: { .5: "Half Star", 1: "One Star", 1.5: "One & Half Star", 2: "Two Stars", 2.5: "Two & Half Stars", 3: "Three Stars", 3.5: "Three & Half Stars", 4: "Four Stars", 4.5: "Four & Half Stars", 5: "Five Stars" }, clearButtonTitle: "Clear", clearCaption: "Not Rated" }, t.fn.rating.Constructor = o, t(document).ready(function () { var e = t("input.rating"); e.length && e.removeClass("rating-loading").addClass("rating-loading").rating() }) });